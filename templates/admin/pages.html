{% extends "admin/base.html" %}

{% block title %}Pages - Admin{% endblock %}
{% block page_title %}Static Pages Management{% endblock %}

{% block content %}
<div class="admin-section">
    <div class="section-header">
        <h2>All Pages</h2>
        <a href="/admin/pages/new" class="btn btn-primary">+ New Page</a>
    </div>
    
    <div class="info-box" style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <strong>AdSense Approval Pages:</strong> Create these 5 pages for Google AdSense approval - About Us, Contact Us, Privacy Policy, Terms & Conditions, Disclaimer
    </div>
    
    <div class="table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Slug</th>
                    <th>Status</th>
                    <th>Footer</th>
                    <th>Order</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for page in pages %}
                <tr>
                    <td><strong>{{ page.title }}</strong></td>
                    <td><a href="/page/{{ page.slug }}" target="_blank">/page/{{ page.slug }}</a></td>
                    <td>
                        <span class="status-badge {{ 'published' if page.is_published else 'draft' }}">
                            {{ 'Published' if page.is_published else 'Draft' }}
                        </span>
                    </td>
                    <td>
                        <span class="status-badge {{ 'published' if page.show_in_footer else 'draft' }}">
                            {{ 'Yes' if page.show_in_footer else 'No' }}
                        </span>
                    </td>
                    <td>{{ page.footer_order }}</td>
                    <td>
                        <a href="/admin/pages/{{ page.id }}" class="btn btn-sm btn-edit">Edit</a>
                        <a href="/page/{{ page.slug }}" target="_blank" class="btn btn-sm btn-view">View</a>
                        <button class="btn btn-sm btn-danger" onclick="deletePage({{ page.id }})">Delete</button>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" style="text-align: center;">No pages found. Create your first page!</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.admin-section { padding: 20px; }
.section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.section-header h2 { color: var(--admin-text); }
.table-container { background: var(--admin-card); border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.3); border: 1px solid var(--admin-border); }
.admin-table { width: 100%; border-collapse: collapse; }
.admin-table th, .admin-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--admin-border); color: var(--admin-text); }
.admin-table th { background: var(--admin-table-header); font-weight: 600; color: var(--admin-text); }
.admin-table tr:hover { background: var(--admin-hover); }
.status-badge { padding: 4px 10px; border-radius: 20px; font-size: 12px; }
.status-badge.published { background: #14532d; color: #4ade80; border: 1px solid #166534; }
.status-badge.draft { background: #433d14; color: #fbbf24; border: 1px solid #6b5e1a; }
.btn { display: inline-block; padding: 8px 16px; border-radius: 4px; text-decoration: none; border: none; cursor: pointer; font-size: 14px; }
.btn-primary { background: var(--admin-accent); color: white; }
.btn-sm { padding: 4px 10px; font-size: 12px; }
.btn-edit { background: #2563eb; color: white; }
.btn-view { background: #475569; color: white; }
.btn-danger { background: #dc2626; color: white; }
.info-box strong { color: var(--admin-accent); }
</style>

<script>
function deletePage(id) {
    if (!confirm('Are you sure you want to delete this page?')) return;
    
    fetch('/api/pages/' + id, {
        method: 'DELETE'
    })
    .then(r => r.json())
    .then(data => {
        if (data.success) {
            location.reload();
        } else {
            alert('Error: ' + data.message);
        }
    });
}
</script>
{% endblock %}
