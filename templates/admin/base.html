<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>{% block title %}Admin Panel - CricLive{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body class="admin-body">
    <div class="admin-wrapper">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/admin" class="sidebar-logo">CricLive Admin</a>
                <div class="server-time-display">
                    <span class="server-time-label">Server:</span>
                    <span id="serverClock" class="server-clock">--:--:--</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <span class="hamburger"></span>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="sidebar-menu">
                    <li class="sidebar-item {% if request.path == '/admin/live-score' %}active{% endif %}">
                        <a href="/admin/live-score" class="sidebar-link">
                            <span class="sidebar-icon">&#127951;</span>
                            <span class="sidebar-text">Live Score</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/scorecard' %}active{% endif %}">
                        <a href="/admin/scorecard" class="sidebar-link">
                            <span class="sidebar-icon">&#128202;</span>
                            <span class="sidebar-text">Scorecard</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/teams' %}active{% endif %}">
                        <a href="/admin/teams" class="sidebar-link">
                            <span class="sidebar-icon">&#127942;</span>
                            <span class="sidebar-text">Teams</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/series' %}active{% endif %}">
                        <a href="/admin/series" class="sidebar-link">
                            <span class="sidebar-icon">&#127941;</span>
                            <span class="sidebar-text">Series</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/matches' %}active{% endif %}">
                        <a href="/admin/matches" class="sidebar-link">
                            <span class="sidebar-icon">&#127951;</span>
                            <span class="sidebar-text">Matches</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/posts' in request.path and 'auto' not in request.path %}active{% endif %}">
                        <a href="/admin/posts" class="sidebar-link">
                            <span class="sidebar-icon">&#128240;</span>
                            <span class="sidebar-text">Posts</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/auto-post' %}active{% endif %}">
                        <a href="/admin/auto-post" class="sidebar-link">
                            <span class="sidebar-icon">&#9889;</span>
                            <span class="sidebar-text">Auto Post</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if request.path == '/admin/categories' %}active{% endif %}">
                        <a href="/admin/categories" class="sidebar-link">
                            <span class="sidebar-icon">&#128194;</span>
                            <span class="sidebar-text">Categories</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/pages' in request.path %}active{% endif %}">
                        <a href="/admin/pages" class="sidebar-link">
                            <span class="sidebar-icon">&#128196;</span>
                            <span class="sidebar-text">Pages</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/redirects' in request.path %}active{% endif %}">
                        <a href="/admin/redirects" class="sidebar-link">
                            <span class="sidebar-icon">&#8634;</span>
                            <span class="sidebar-text">Redirects</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/seo' in request.path %}active{% endif %}">
                        <a href="/admin/seo" class="sidebar-link">
                            <span class="sidebar-icon">&#128269;</span>
                            <span class="sidebar-text">SEO & Sitemap</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/adsense' in request.path %}active{% endif %}">
                        <a href="/admin/adsense" class="sidebar-link">
                            <span class="sidebar-icon">&#128176;</span>
                            <span class="sidebar-text">AdSense</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/analytics' in request.path %}active{% endif %}">
                        <a href="/admin/analytics" class="sidebar-link">
                            <span class="sidebar-icon">&#128200;</span>
                            <span class="sidebar-text">Analytics</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/notifications' in request.path %}active{% endif %}">
                        <a href="/admin/notifications" class="sidebar-link">
                            <span class="sidebar-icon">&#128276;</span>
                            <span class="sidebar-text">Notifications</span>
                        </a>
                    </li>
                    <li class="sidebar-item {% if '/admin/theme' in request.path %}active{% endif %}">
                        <a href="/admin/theme" class="sidebar-link">
                            <span class="sidebar-icon">&#127912;</span>
                            <span class="sidebar-text">Theme</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <a href="/admin/profile" class="sidebar-link">
                    <span class="sidebar-icon">&#128100;</span>
                    <span class="sidebar-text">Profile</span>
                </a>
                <a href="/admin/logout" class="sidebar-link logout-link">
                    <span class="sidebar-icon">&#128682;</span>
                    <span class="sidebar-text">Logout</span>
                </a>
                <a href="/" class="sidebar-link">
                    <span class="sidebar-icon">&#8592;</span>
                    <span class="sidebar-text">Back to Site</span>
                </a>
            </div>
        </aside>
        
        <div class="admin-main">
            <header class="admin-header">
                <h1 class="admin-page-title">{% block page_title %}Dashboard{% endblock %}</h1>
                <div class="admin-user">
                    <span>{{ session.get('admin_name', 'Admin') }}</span>
                </div>
                <button class="mobile-sidebar-toggle" id="mobileSidebarToggle" aria-label="Toggle sidebar">
                    <span class="hamburger"></span>
                </button>
            </header>
            
            <main class="admin-content">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
    <script>
    // Server Clock
    function updateServerClock() {
        fetch('/api/server-time')
            .then(res => res.json())
            .then(data => {
                if (data.time) {
                    document.getElementById('serverClock').textContent = data.time;
                }
            })
            .catch(() => {});
    }
    updateServerClock();
    setInterval(updateServerClock, 1000);
    </script>
</body>
</html>
